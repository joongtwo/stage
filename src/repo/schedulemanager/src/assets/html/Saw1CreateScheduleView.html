<aw-command-panel caption="i18n.createScheduleTitle" context="subPanelContext">
    <div class="aw-layout-flexColumn" show-when="data.activeState.value.activeView ==='AddObjectPrimarySub'">
        <aw-add
            target-object="{{ctx.panelContext.targetObject}}"
            relations="{{ctx.panelContext.relationType}}"
            include-types="Schedule"
            auto-select-on-unique-type=true
            type-filter="Schedule"
            search-filter="Schedule.is_template=true"
            type-override-id="SM"
            add-panel-state="fields.addPanelState"
            active-state="data.activeState"
            project-state="data.projectState"
            sub-panel-context="{ ...subPanelContext }"
            xrt-state="data.xrtState"
            edit-handler="editHandlers.addPanelEditHandler">
        </aw-add>
        <aw-checkbox prop="data.isRunAsync" visible-when="conditions.isPaletteSearchTabAddACopyCancelButtonVisible && !conditions.shouldRelateTargetObject"> </aw-checkbox>
        <aw-checkbox prop="data.openOnCreate" visible-when="conditions.isPaletteSearchTabAddACopyCancelButtonVisible && data.isRunAsync.dbValue === false"></aw-checkbox>
            <!-- Panel footer-->
        <aw-panel-footer visible-when="data.activeView!='AssignProjectSub' && data.activeView!='addReferenceSub' && data.activeState.value.activeView==='AddObjectPrimarySub'">
            <!-- Open On Create option-->
            <aw-checkbox prop="data.openOnCreate" visible-when="conditions.isNewTabAddButtonEnable"></aw-checkbox>
            <!-- Panel-footer button for New tab -->
            <aw-button default="true" action="validateAndCreateSchedule" enable-when="!ctx.addItemEventProgressing && formProp.attributes.valid && conditions.isNewTabAddButtonEnable" visible-when="conditions.isTypeNotNull">
                <aw-i18n>i18n.create</aw-i18n>
            </aw-button>
            <!-- panel-footer button for Add a Copy sub Panel -->
            <aw-button size="auto" button-type="base" default="true" action="toggleAddACopy" visible-when="conditions.isPaletteSearchAddCopyButtonVisible && conditions.isPaletteSearchTabAddACopyButtonEnable" >
                <aw-i18n>i18n.addACopy</aw-i18n>
            </aw-button>
            <!-- panel-footer button for cancel Add a Copy sub Panel -->
            <aw-button size="auto" button-type="base" default="true" action="toggleAddACopy" visible-when="conditions.isPaletteSearchTabAddACopyCancelButtonVisible" enable-when="conditions.isPaletteSearchTabAddACopyCancelButtonActivate" >
                <aw-i18n>i18n.cancel</aw-i18n>
            </aw-button>
            <!-- Panel-footer button for Palette and Search tab -->
           <aw-button default="true" action="relateSchedules" visible-when="conditions.isPaletteSearchTabAddButtonVisible && !conditions.isMySchedulesLocation" >
                <aw-i18n>i18n.add</aw-i18n>
            </aw-button>
            <!-- panel-footer button for Add, Add a Copy sub Panel -->
            <aw-button size="auto" default="true" action="copyScheduleInProcess" visible-when="data.isRunAsync.dbValue === false && conditions.isPaletteSearchTabAddACopyCancelButtonVisible" enable-when="conditions.isPaletteSearchTabAddACopyCancelButtonActivate">
                <aw-i18n>i18n.ADD_BUTTON_TITLE</aw-i18n>
            </aw-button>
            <aw-button size="auto" default="true" action="copyScheduleAsync" visible-when="data.isRunAsync.dbValue === true && conditions.isPaletteSearchTabAddACopyCancelButtonVisible">
                <aw-i18n>i18n.ADD_BUTTON_TITLE</aw-i18n>
            </aw-button>
        </aw-panel-footer>
    </div>
    <aw-add-navigate active-state="data.activeState" project-state="data.projectState" action="actions.setActiveView"></aw-add-navigate>
</aw-command-panel>
